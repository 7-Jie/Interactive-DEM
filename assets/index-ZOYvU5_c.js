var At=Object.defineProperty;var Rt=(a,e,t)=>e in a?At(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var y=(a,e,t)=>Rt(a,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const Mt=`#version 300 es
layout(location=0) in vec2 aUnit; // unit circle verts
layout(location=1) in vec2 iPos; // per-instance position
layout(location=2) in vec2 iAB; // per-instance semi-axes (a,b)
layout(location=3) in vec2 iRot; // (cosθ, sinθ)
uniform vec2 uRes; // canvas size in px
uniform float uScale; // px→N world scale


void main(){
vec2 p = aUnit * iAB; // scale unit circle into ellipse
// rotate by θ
vec2 r = vec2(
p.x * iRot.x - p.y * iRot.y,
p.x * iRot.y + p.y * iRot.x
);
vec2 world = iPos + r; // translate
// NDC
vec2 ndc = (world / uRes)*2.0 - 1.0; // positions already in pixels
ndc.y = -ndc.y; // flip Y for WebGL
gl_Position = vec4(ndc, 0.0, 1.0);
}
`,bt=`#version 300 es
precision mediump float;
out vec4 o;
uniform vec4 uFill;
uniform vec4 uStroke;
void main(){
// Simple solid fill; stroke drawn by second pass if wanted
o = uFill;
}
`;class wt{constructor(e){y(this,"gl");y(this,"prog");y(this,"vao");y(this,"uRes");y(this,"uFill");y(this,"uStroke");y(this,"uScale");y(this,"vbuf");y(this,"ibuf");y(this,"bPos");y(this,"bAB");y(this,"bRot");y(this,"verts");y(this,"segs");const t=e.getContext("webgl2");if(!t)throw new Error("WebGL2 required");this.gl=t,this.vao=null,this.prog=this.mkProg(Mt,bt),this.uRes=t.getUniformLocation(this.prog,"uRes"),this.uFill=t.getUniformLocation(this.prog,"uFill"),this.uStroke=t.getUniformLocation(this.prog,"uStroke"),this.uScale=t.getUniformLocation(this.prog,"uScale");const i=500;this.segs=i;const n=[0,0];for(let c=0;c<=i;c++){const l=2*Math.PI*c/i;n.push(Math.cos(l),Math.sin(l))}const o=[];for(let c=1;c<i;c++)o.push(0,c,c+1);this.verts=o.length,this.vao=t.createVertexArray(),t.bindVertexArray(this.vao),this.vbuf=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vbuf),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0),this.ibuf=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.ibuf),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),this.bPos=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.bPos),t.enableVertexAttribArray(1),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,0),t.vertexAttribDivisor(1,1),this.bAB=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.bAB),t.enableVertexAttribArray(2),t.vertexAttribPointer(2,2,t.FLOAT,!1,0,0),t.vertexAttribDivisor(2,1),this.bRot=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.bRot),t.enableVertexAttribArray(3),t.vertexAttribPointer(3,2,t.FLOAT,!1,0,0),t.vertexAttribDivisor(3,1),t.bindVertexArray(null)}mkProg(e,t){const i=this.gl,n=i.createShader(i.VERTEX_SHADER);if(i.shaderSource(n,e),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error(i.getShaderInfoLog(n)??"vs compile error");const o=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(o,t),i.compileShader(o),!i.getShaderParameter(o,i.COMPILE_STATUS))throw new Error(i.getShaderInfoLog(o)??"fs compile error");const c=i.createProgram();if(i.attachShader(c,n),i.attachShader(c,o),i.linkProgram(c),!i.getProgramParameter(c,i.LINK_STATUS))throw new Error(i.getProgramInfoLog(c)??"link error");return i.deleteShader(n),i.deleteShader(o),c}draw(e,t,i,n,o,c,l,d,f){const r=this.gl,m=window.devicePixelRatio||1;(r.canvas.width!==Math.floor(e*m)||r.canvas.height!==Math.floor(t*m))&&(r.canvas.width=Math.floor(e*m),r.canvas.height=Math.floor(t*m)),r.viewport(0,0,r.canvas.width,r.canvas.height),r.clearColor(.05,.07,.09,1),r.clear(r.COLOR_BUFFER_BIT),r.useProgram(this.prog),r.uniform2f(this.uRes,r.canvas.width,r.canvas.height);function F(g,I=1){const s=parseInt(g.slice(1,3),16)/255,v=parseInt(g.slice(3,5),16)/255,B=parseInt(g.slice(5,7),16)/255;return[s,v,B,I]}const P=f?.filled??!0,A=F(f?.fill??"#6aa84f"),R=F(f?.stroke??"#2e7d32"),$=f?.strokeW??1;r.uniform4f(this.uFill,A[0],A[1],A[2],A[3]),r.uniform4f(this.uStroke,R[0],R[1],R[2],R[3]),r.bindVertexArray(this.vao);const Z=new Float32Array(d*2),_=new Float32Array(d*2),L=new Float32Array(d*2);for(let g=0;g<d;g++)Z[2*g]=i[g],Z[2*g+1]=n[g],_[2*g]=o[g],_[2*g+1]=c[g],L[2*g]=Math.cos(l[g]),L[2*g+1]=Math.sin(l[g]);if(r.bindBuffer(r.ARRAY_BUFFER,this.bPos),r.bufferData(r.ARRAY_BUFFER,Z,r.DYNAMIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,this.bAB),r.bufferData(r.ARRAY_BUFFER,_,r.DYNAMIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,this.bRot),r.bufferData(r.ARRAY_BUFFER,L,r.DYNAMIC_DRAW),$>0){const g=new Float32Array(d*2);for(let I=0;I<d;I++)g[2*I]=_[2*I]+$,g[2*I+1]=_[2*I+1]+$;r.uniform4f(this.uFill,R[0],R[1],R[2],R[3]),r.bindBuffer(r.ARRAY_BUFFER,this.bAB),r.bufferData(r.ARRAY_BUFFER,g,r.DYNAMIC_DRAW),r.drawElementsInstanced(r.TRIANGLES,this.verts,r.UNSIGNED_SHORT,0,d),r.bindBuffer(r.ARRAY_BUFFER,this.bAB),r.bufferData(r.ARRAY_BUFFER,_,r.DYNAMIC_DRAW)}P&&(r.uniform4f(this.uFill,A[0],A[1],A[2],A[3]),r.drawElementsInstanced(r.TRIANGLES,this.verts,r.UNSIGNED_SHORT,0,d)),r.bindVertexArray(null)}}function pt(a,e,t,i){const n=Math.ceil(a/t),o=Math.ceil(e/t);return{w:a,h:e,cell:t,cols:n,rows:o,head:new Int32Array(n*o).fill(-1),next:new Int32Array(i).fill(-1)}}function Ft(a,e,t,i){a.head.fill(-1),a.next.fill(-1);const{cols:n,rows:o,cell:c}=a;for(let l=0;l<i;l++){const d=Math.max(0,Math.min(n-1,e[l]/c|0)),r=Math.max(0,Math.min(o-1,t[l]/c|0))*n+d;a.next[l]=a.head[r],a.head[r]=l}}function Pt(a,e,t,i){const{cols:n,rows:o,head:c,next:l}=a;for(let d=0;d<o;d++)for(let f=0;f<n;f++)for(let r=-1;r<=1;r++)for(let m=-1;m<=1;m++){const F=f+m,P=d+r;if(F<0||P<0||F>=n||P>=o)continue;let A=c[d*n+f];for(;A!==-1;){let R=c[P*n+F];for(;R!==-1;)A<R&&i(A,R),R=l[R];A=l[A]}}}class St{constructor(e,t,i,n){y(this,"wx0");y(this,"wy0");y(this,"wx1");y(this,"wy1");y(this,"nWalls",0);y(this,"x");y(this,"y");y(this,"vx");y(this,"vy");y(this,"ax");y(this,"ay");y(this,"a");y(this,"b");y(this,"th");y(this,"w");y(this,"I");y(this,"m");y(this,"fx");y(this,"fy");y(this,"T");y(this,"n",0);y(this,"maxN");y(this,"grid");y(this,"p");y(this,"width",0);y(this,"height",0);this.maxN=e,this.width=t,this.height=i,this.p=n;const o=c=>new Float32Array(c);this.x=o(e),this.y=o(e),this.vx=o(e),this.vy=o(e),this.ax=o(e),this.ay=o(e),this.a=o(e),this.b=o(e),this.th=o(e),this.w=o(e),this.I=o(e),this.m=o(e),this.fx=o(e),this.fy=o(e),this.T=o(e),this.grid=pt(t,i,n.cell,e),this.wx0=new Float32Array(1024),this.wy0=new Float32Array(1024),this.wx1=new Float32Array(1024),this.wy1=new Float32Array(1024),this.nWalls=0}resize(e,t){this.width=e,this.height=t,this.grid=pt(e,t,this.p.cell,this.maxN)}add(e,t,i,n){if(this.n>=this.maxN)return;const o=this.n++;this.x[o]=e,this.y[o]=t,this.vx[o]=0,this.vy[o]=0,this.ax[o]=0,this.ay[o]=0,this.a[o]=i,this.b[o]=n,this.th[o]=Math.random()*Math.PI*2,this.w[o]=0;const c=1,l=Math.PI*i*n;this.m[o]=c*l,this.I[o]=.25*l*(i*i+n*n)}addWall(e,t,i,n){if(this.nWalls>=1024)return;const o=this.nWalls++;this.wx0[o]=e,this.wy0[o]=t,this.wx1[o]=i,this.wy1[o]=n}clearWalls(){this.nWalls=0}dampingC(e,t){const i=Math.max(1e-4,this.p.e);return 2*(1/Math.sqrt(1+(Math.PI/Math.log(i))**2))*Math.sqrt(t*e)}supportRadius(e,t,i,n,o){const c=Math.cos(i),l=Math.sin(i),d=c*n+l*o,f=-l*n+c*o,r=Math.max(1e-6,e*d*(e*d)+t*f*(t*f));return Math.sqrt(r)}closestPointOnSegment(e,t,i,n,o,c){const l=o-i,d=c-n,f=l*l+d*d;let r=0;return f>0&&(r=((e-i)*l+(t-n)*d)/f,r=Math.min(1,Math.max(0,r))),{x:i+r*l,y:n+r*d}}step(){const{n:e,x:t,y:i,vx:n,vy:o,ax:c,ay:l,a:d,b:f,th:r,w:m,fx:F,fy:P,T:A,m:R,I:$}=this,{dt:Z,substeps:_,kn:L,mu:g}=this.p;for(let I=0;I<_;I++){F.fill(0,0,e),P.fill(0,0,e),A.fill(0,0,e);for(let s=0;s<e;s++)F[s]+=this.p.gx*R[s],P[s]+=this.p.gy*R[s];Ft(this.grid,t,i,e),Pt(this.grid,t,i,(s,v)=>{const B=t[v]-t[s],H=i[v]-i[s],b=B*B+H*H;if(b<=1e-12)return;const W=Math.sqrt(b),S=B/W,M=H/W,U=this.supportRadius(d[s],f[s],r[s],S,M),V=this.supportRadius(d[v],f[v],r[v],-S,-M),N=U+V-W;if(N>0){const D=R[s],Y=R[v],z=D*Y/(D+Y),j=n[s]+-m[s]*M*U,tt=o[s]+m[s]*S*U,et=n[v]+-m[v]*M*V,it=o[v]+m[v]*S*V,X=et-j,K=it-tt,nt=X*S+K*M,J=L*N,Q=this.dampingC(z,L),ot=nt<0?-Q*nt:0,rt=J+ot,lt=-M,C=S,st=X*lt+K*C;let O=-(.4*Q)*st;const ft=g*J;O=Math.max(-ft,Math.min(ft,O));const ut=rt*S+O*lt,yt=rt*M+O*C;F[s]-=ut,P[s]-=yt,F[v]+=ut,P[v]+=yt,A[s]-=U*O,A[v]+=V*O}});for(let s=0;s<e;s++)for(let v=0;v<this.nWalls;v++){const B=this.wx0[v],H=this.wy0[v],b=this.wx1[v],W=this.wy1[v],S=this.closestPointOnSegment(t[s],i[s],B,H,b,W),M=t[s]-S.x,U=i[s]-S.y,V=M*M+U*U;if(V<=1e-12)continue;const N=Math.sqrt(V);let D=M/N,Y=U/N;const z=this.supportRadius(d[s],f[s],r[s],D,Y),j=z-N;if(j>0){const tt=n[s]+-m[s]*Y*z,et=o[s]+m[s]*D*z,it=tt*D+et*Y,X=L*j,K=this.dampingC(R[s],L),nt=it<0?-K*it:0,J=X+nt,Q=-Y,ot=D,rt=tt*Q+et*ot;let C=-(.4*K)*rt;const st=this.p.muw*X;C=Math.max(-st,Math.min(st,C));const dt=J*D+C*Q,O=J*Y+C*ot;F[s]+=dt,P[s]+=O,A[s]+=z*C}}for(let s=0;s<e;s++){const v=F[s]/R[s],B=P[s]/R[s],H=this.p.damp,b=this.p.dt,W=1/(1+H*b);n[s]=(n[s]+(c[s]+v)*.5*b)*W,o[s]=(o[s]+(l[s]+B)*.5*b)*W,c[s]=v,l[s]=B,t[s]+=n[s]*b+.5*c[s]*b*b,i[s]+=o[s]*b+.5*l[s]*b*b;const S=A[s]/Math.max(1e-6,$[s]);m[s]=(m[s]+S*b)*W,r[s]+=m[s]*b+.5*S*b*b;const M=Math.max(d[s],f[s]);i[s]-M<0&&(i[s]=M,o[s]*=-.2),i[s]+M>this.height&&(i[s]=this.height-M,o[s]*=-.2),t[s]-M<0&&(t[s]=M,n[s]*=-.2),t[s]+M>this.width&&(t[s]=this.width-M,n[s]*=-.2)}}}}function Et(a,e,t){a.innerHTML="";const i=(c,l,d,f,r)=>{const m=document.createElement("label");m.innerHTML=`${c}<input type="range" min="${l}" max="${d}" step="${f}"> <span class="val"></span>`;const F=m.querySelector("input"),P=m.querySelector(".val");function A(){F.value=String(e[r]),P.textContent=e[r].toFixed(2)}F.oninput=()=>{e[r]=parseFloat(F.value),A(),t()},A(),a.appendChild(m)},n=(c,l)=>{const d=document.createElement("label");d.innerHTML=`${c}<input type="checkbox">`;const f=d.querySelector("input");f.checked=!!e[l],f.oninput=()=>{e[l]=f.checked,t()},a.appendChild(d)},o=(c,l)=>{const d=document.createElement("label");d.innerHTML=`${c}<input type="color">`;const f=d.querySelector("input");f.value=String(e[l]),f.oninput=()=>{e[l]=f.value,t()},a.appendChild(d)};i("kn",1e4,1e7,1e4,"kn"),i("mu",0,1,.01,"mu"),i("μ_wall",0,1,.01,"muw"),i("e",.02,.9,.01,"e"),i("g",0,2e3,10,"g"),i("damp",0,5,.05,"damp"),n("filled","filled"),o("fill","fill"),o("stroke","stroke"),i("strokeW",0,4,.1,"strokeW")}const k=document.getElementById("gl"),G=document.getElementById("overlay"),h=G.getContext("2d"),kt=new wt(k),E={kn:4e6,e:.02,mu:.4,muw:.6,g:980,gx:0,gy:980,damp:.5,dt:1/360,substeps:4,cell:32},u=new St(4e3,innerWidth*devicePixelRatio,innerHeight*devicePixelRatio,E);for(let a=0;a<200;a++)u.add(Math.random()*innerWidth*devicePixelRatio,Math.random()*innerHeight*devicePixelRatio*.5,8+6*Math.random(),6+4*Math.random());const It=document.getElementById("controls"),q={kn:E.kn,mu:E.mu,muw:E.muw,e:E.e,g:E.g,damp:E.damp,filled:!0,fill:"#6aa84f",stroke:"#2e7d32",strokeW:1};Et(It,q,()=>{E.kn=q.kn,E.mu=q.mu,E.muw=q.muw,E.e=q.e,E.g=q.g,E.damp=q.damp});document.getElementById("btn-reset").onclick=()=>{u.n=0,u.clearWalls()};for(const a of Array.from(document.querySelectorAll(".spawn")))a.onclick=()=>{const e=parseInt(a.dataset.n||"10",10);for(let t=0;t<e;t++)u.add(Math.random()*k.width,20,10+8*Math.random(),8+6*Math.random())};let w="gen";for(const a of Array.from(document.querySelectorAll("#toolbar .btn")))a.onclick=()=>{w=a.dataset.tool||"gen"};function Tt(){const a=devicePixelRatio||1;G.width=Math.floor(innerWidth*a),G.height=Math.floor(innerHeight*a),G.style.width=innerWidth+"px",G.style.height=innerHeight+"px"}function Bt(){const a=devicePixelRatio||1;h.clearRect(0,0,G.width,G.height),h.save(),h.lineWidth=Math.max(1,Math.floor(2*a)),h.strokeStyle="#88a";for(let e=0;e<u.nWalls;e++)h.beginPath(),h.moveTo(u.wx0[e],u.wy0[e]),h.lineTo(u.wx1[e],u.wy1[e]),h.stroke();if(h.restore(),p.active){if(w==="hand")h.save(),h.strokeStyle="#ffd166",h.lineWidth=Math.max(1,Math.floor(2*a)),h.beginPath(),h.arc(p.x,p.y,14*a,0,Math.PI*2),h.stroke(),h.beginPath(),h.moveTo(p.x+10*a,p.y),h.lineTo(p.x+4*a,p.y),h.stroke(),h.restore();else if(w==="shovel"){h.save();const e=vt*a;h.strokeStyle="#69f",h.lineWidth=Math.max(1,Math.floor(2*a)),h.beginPath(),h.arc(p.x,p.y,e,0,Math.PI*2),h.stroke(),h.beginPath(),h.moveTo(p.x,p.y-e),h.lineTo(p.x,p.y-e-18*a),h.stroke(),h.restore()}else if(w.startsWith("pen")){if(h.save(),h.strokeStyle="#8cf",h.lineWidth=Math.max(1,Math.floor(2*a)),x){if(w==="pen-line")h.beginPath(),h.moveTo(x[0],x[1]),h.lineTo(p.x,p.y),h.stroke();else if(w==="pen-rect"){const e=Math.min(x[0],p.x),t=Math.min(x[1],p.y),i=Math.abs(p.x-x[0]),n=Math.abs(p.y-x[1]);h.strokeRect(e,t,i,n)}else if(w==="pen-circle"){const e=Math.hypot(p.x-x[0],p.y-x[1]);h.beginPath(),h.arc(x[0],x[1],e,0,Math.PI*2),h.stroke()}else if(w==="pen-tri"){const e=mt(x[0],x[1],p.x,p.y);h.beginPath(),h.moveTo(e[0].x,e[0].y),h.lineTo(e[1].x,e[1].y),h.lineTo(e[2].x,e[2].y),h.closePath(),h.stroke()}}else h.beginPath(),h.moveTo(p.x-8*a,p.y),h.lineTo(p.x+8*a,p.y),h.stroke(),h.beginPath(),h.moveTo(p.x,p.y-8*a),h.lineTo(p.x,p.y+8*a),h.stroke();h.restore()}}}function Wt(a,e,t,i){const n=Math.min(a,t),o=Math.max(a,t),c=Math.min(e,i),l=Math.max(e,i);u.addWall(n,c,o,c),u.addWall(o,c,o,l),u.addWall(o,l,n,l),u.addWall(n,l,n,c)}function _t(a,e,t,i){const n=Math.hypot(t-a,i-e),o=48;let c=a+n,l=e;for(let d=1;d<=o;d++){const f=2*Math.PI*d/o,r=a+n*Math.cos(f),m=e+n*Math.sin(f);u.addWall(c,l,r,m),c=r,l=m}}function mt(a,e,t,i){const n=t-a,o=i-e,l=Math.hypot(n,o)||1,d=Math.atan2(o,n),f={x:a,y:e},r={x:a+l*Math.cos(d+2*Math.PI/3),y:e+l*Math.sin(d+2*Math.PI/3)},m={x:a+l*Math.cos(d+4*Math.PI/3),y:e+l*Math.sin(d+4*Math.PI/3)};return[f,r,m]}function Lt(a,e,t,i){const n=mt(a,e,t,i);u.addWall(n[0].x,n[0].y,n[1].x,n[1].y),u.addWall(n[1].x,n[1].y,n[2].x,n[2].y),u.addWall(n[2].x,n[2].y,n[0].x,n[0].y)}function xt(){const a=devicePixelRatio||1;k.width=Math.floor(innerWidth*a),k.height=Math.floor(innerHeight*a),k.style.width=innerWidth+"px",k.style.height=innerHeight+"px",u.resize(k.width,k.height),Tt()}addEventListener("resize",xt);xt();const p={active:!1,x:0,y:0};let ht=!1,at=0,ct=0,T=-1,x=null,vt=40;k.addEventListener("pointerdown",a=>{k.setPointerCapture(a.pointerId);const e=devicePixelRatio||1,t=a.clientX*e,i=a.clientY*e;if(p.active=!0,p.x=t,p.y=i,ht=!0,at=t,ct=i,w==="gen")u.add(t,i,10+8*Math.random(),8+6*(.3+.7*Math.random())),T=u.n-1;else if(w==="hand"){let n=-1,o=1e12;for(let c=0;c<u.n;c++){const l=u.x[c]-t,d=u.y[c]-i,f=l*l+d*d;f<o&&(n=c,o=f)}n>=0&&(T=n)}else w.startsWith("pen")&&(x=[t,i])});k.addEventListener("pointermove",a=>{const e=devicePixelRatio||1,t=a.clientX*e,i=a.clientY*e;if(p.x=t,p.y=i,!!ht){if(w==="gen")T>=0&&(u.vx[T]+=(t-at)*5,u.vy[T]+=(i-ct)*5);else if(w==="hand")T>=0&&(u.x[T]=t,u.y[T]=i,u.vx[T]=(t-at)*10,u.vy[T]=(i-ct)*10);else if(w==="shovel"){const n=vt*e,o=200;for(let c=0;c<u.n;c++){const l=u.x[c]-t,d=u.y[c]-i,f=Math.hypot(l,d);if(f<n&&f>1){const r=l/f,m=d/f;u.vx[c]+=r*o,u.vy[c]+=m*o}}}at=t,ct=i}});k.addEventListener("pointerup",a=>{const e=devicePixelRatio||1,t=a.clientX*e,i=a.clientY*e;w==="pen-line"&&x&&u.addWall(x[0],x[1],t,i),w==="pen-rect"&&x&&Wt(x[0],x[1],t,i),w==="pen-circle"&&x&&_t(x[0],x[1],t,i),w==="pen-tri"&&x&&Lt(x[0],x[1],t,i),ht=!1,T=-1,x=null,p.active=!1});function gt(){u.step(),kt.draw(innerWidth,innerHeight,u.x,u.y,u.a,u.b,u.th,u.n,q),Bt(),requestAnimationFrame(gt)}requestAnimationFrame(gt);
